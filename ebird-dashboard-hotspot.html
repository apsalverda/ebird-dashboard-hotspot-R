<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>eBird User Dashboard</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="ebird-dashboard-hotspot_files/libs/clipboard/clipboard.min.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-html/quarto.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-html/popper.min.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-html/anchor.min.js"></script>
<link href="ebird-dashboard-hotspot_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ebird-dashboard-hotspot_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ebird-dashboard-hotspot_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ebird-dashboard-hotspot_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ebird-dashboard-hotspot_files/libs/bootstrap/bootstrap-ca4d8458e899d3227a811fbac09a8a6e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/quarto-dashboard.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/stickythead.js"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/datatables.min.js" kdttablesentinel="true"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/pdfmake.min.js" kdttablesentinel="true"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/vfs_fonts.js" kdttablesentinel="true"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/web-components.js" type="module"></script>
<script src="ebird-dashboard-hotspot_files/libs/quarto-dashboard/components.js"></script>
<link href="ebird-dashboard-hotspot_files/libs/quarto-dashboard/datatables.min.css" rel="stylesheet" kdttablesentinel="true">


</head>

<body class="quarto-dashboard dashboard-fill dashboard-sidebar fullcontent">

<header id="quarto-dashboard-header">
<nav class="navbar navbar-expand-md slim" data-bs-theme="dark">
  <div class="navbar-container container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-controls="dashboard-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>    


    <div class="navbar-brand-container">       

      <div class="navbar-title">
        <div class="navbar-title-text"><a href="#">eBird User Dashboard</a></div>
        
        
      </div>
    </div>
<div id="dashboard-collapse" class="navbar-collapse collapse"><ul class="navbar-nav navbar-nav-scroll me-auto" role="tablist"><li class="nav-item" role="presentation"><a id="tab-hotspot" class="nav-link active" data-bs-toggle="tab" role="tab" data-bs-target="#hotspot" data-scrolling="false" href="#hotspot" aria-controls="hotspot" aria-selected="true"><span class="nav-link-text">Hotspot</span></a></li></ul><div class="quarto-dashboard-links"><a class="quarto-dashboard-link" href="mailto:salverda@yahoo.com?subject=Your eBird dashboard" target="_blank"><i class="bi bi-envelope-at-fill"></i></a><a class="quarto-dashboard-link" href="https://www.linkedin.com/in/anne-pier-salverda-37ab7042/" target="_blank"><i class="bi bi-linkedin"></i></a><a class="quarto-dashboard-link" href="https://scholar.google.com/citations?user=dnlnAJQAAAAJ" target="_blank"><i class="bi bi-mortarboard-fill"></i></a><a class="quarto-dashboard-link" href="https://github.com/apsalverda/ebird-dashboard-hotspot" target="_blank"><i class="bi bi-github"></i></a></div></div></div>
</nav>
</header>
<div class="page-layout-custom quarto-dashboard-content bslib-gap-spacing html-fill-container bslib-page-fill quarto-dashboard-pages dashboard-sidebar-container">  

<div class="cell bslib-grid-item html-fill-item">
<style type="text/css">

<!-- .irs--shiny .irs-handle:hover { background-color: darkgray; width: 12px; height: 12px; top: 23px } -->
</style>
</div>
<div class="bslib-sidebar-layout html-fill-item html-fill-container" data-bslib-sidebar-open="desktop" data-bslib-sidebar-init="true" style=" --bslib-sidebar-width: 225px" data-bslib-sidebar-border="false" data-bslib-sidebar-border-radius="false"><div class="main html-fill-container html-fill-item"><div class="sidebar-content html-fill-item html-fill-container">
<div class="tab-content bslib-grid html-fill-item html-fill-container" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div id="hotspot" class="dashboard-page tab-pane show active html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-hotspot">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 10fr) minmax(3em, 90fr); grid-auto-columns: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="bslib-grid bslib-mb-spacing html-fill-item html-fill-container" style="grid-template-columns:repeat(5, minmax(0, 1fr));--bslib-grid-height:100px;--bslib-grid-height-mobile:auto;gap:2px;min-height:100px;" data-require-bs-version="5" data-require-bs-caller="layout_column_wrap()">
<div class="bslib-grid-item html-fill-item html-fill-container">
<div class="card bslib-card bslib-mb-spacing html-fill-container bslib-value-box bg-primary html-fill-item" data-bslib-card-init="" data-require-bs-caller="card()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">Species</p>
<div class="shiny-text-output value-box-value" id="total_species_text"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bslib-grid-item html-fill-item html-fill-container">
<div class="card bslib-card bslib-mb-spacing html-fill-container bslib-value-box bg-primary html-fill-item" data-bslib-card-init="" data-require-bs-caller="card()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">Checklists</p>
<div class="shiny-text-output value-box-value" id="total_checklists_text"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bslib-grid-item html-fill-item html-fill-container">
<div class="card bslib-card bslib-mb-spacing html-fill-container bslib-value-box bg-primary html-fill-item" data-bslib-card-init="" data-require-bs-caller="card()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">Max checklist</p>
<div class="shiny-text-output value-box-value" id="max_checklist_text"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bslib-grid-item html-fill-item html-fill-container">
<div class="card bslib-card bslib-mb-spacing html-fill-container bslib-value-box bg-primary html-fill-item" data-bslib-card-init="" data-require-bs-caller="card()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">Hours</p>
<div class="shiny-text-output value-box-value" id="total_time_text"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bslib-grid-item html-fill-item html-fill-container">
<div class="card bslib-card bslib-mb-spacing html-fill-container bslib-value-box bg-primary html-fill-item" data-bslib-card-init="" data-require-bs-caller="card()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto;">
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">Observations</p>
<div class="shiny-text-output value-box-value" id="total_observations_text"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div>
<div class="card tabset html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-header bslib-navs-card-title"><div class="card-title html-fill-item html-fill-container"><span style="display: inline">

</span></div><ul class="nav nav-tabs card-header-tabs" role="tablist" data-tabsetid="card-tabset-6"><li class="nav-item" role="presentation"><a href="#card-tabset-6-1" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Checklists" aria-selected="true" class="nav-link active">Checklists</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-6-2" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Species" aria-selected="false" class="nav-link">Species</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-6-3" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Year list" aria-selected="false" class="nav-link">Year list</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-6-4" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Observations" aria-selected="false" class="nav-link">Observations</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-6-5" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Map" aria-selected="false" class="nav-link">Map</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-6-6" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Help" aria-selected="false" class="nav-link">Help</a></li></ul></div>






<div class="tab-content html-fill-item html-fill-container" data-tabset-id="card-tabset-6"><div class="tab-pane active show html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-1"><div class="card-body html-fill-item html-fill-container" data-title="Checklists">
<div class="cell-output-display html-fill-item html-fill-container">

<div id="ppitest" style="width:1in;visible:hidden;padding:0px" class="html-fill-item html-fill-container"></div>

</div>
<div class="cell-output-display html-fill-item html-fill-container">
<script>$(document).on("shiny:connected", function(e) {
                                    var w = window.innerWidth;
                                    var h = window.innerHeight;
                                    var d =  document.getElementById("ppitest").offsetWidth;
                                    var obj = {width: w, height: h, dpi: d};
                                    Shiny.onInputChange("pltChange", obj);
                                });
                                $(window).resize(function(e) {
                                    var w = $(this).width();
                                    var h = $(this).height();
                                    var d =  document.getElementById("ppitest").offsetWidth;
                                    var obj = {width: w, height: h, dpi: d};
                                    Shiny.onInputChange("pltChange", obj);
                                });
                            </script>
</div>
<div class="cell-output-display html-fill-item html-fill-container">
<script>
$(document).on('shown.bs.tab', 'a[data-toggle="tab"]', function (e) {
    var w = $(window).width();
    var h = $(window).height();
    var d = document.getElementById("ppitest").offsetWidth;
    var obj = {width: w, height: h, dpi: d};
    Shiny.onInputChange("pltChange", obj);
});
</script>
</div>
<div class="cell-output-display html-fill-item html-fill-container">
<div class="girafe html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="species_count_plot" style="width:100%;"></div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-2"><div class="card-body html-fill-item html-fill-container" data-title="Species">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="font-size: 80%" class="html-fill-item html-fill-container">
<div class="datatables html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="data_preview" style="width:100%;height:auto;"></div>
</div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-3"><div class="card-body html-fill-item html-fill-container" data-title="Year list">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="columns-container html-fill-item html-fill-container" data-border-style="none">
<div class="html-fill-item html-fill-container bslib-grid" data-border-style="none" style="display: grid; grid-template-columns: minmax(3em, 1fr) minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="column html-fill-item html-fill-container" style="width:100%;">
<div class="top-left-container html-fill-item html-fill-container" data-border-style="none">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="display: inline-block; padding-top: 0px; margin-top: 0px; margin-left: 16px; margin-right: 16px; font-size: 15px; margin-bottom: 300px;" class="html-fill-item html-fill-container">
<div class="form-group shiny-input-container html-fill-item html-fill-container no-baseline" style="width:100%;">
<label class="control-label" id="year_list_slider-label" for="year_list_slider"></label>
<input class="js-range-slider" id="year_list_slider" data-skin="shiny" data-type="double" data-min="0" data-max="0" data-from="0" data-to="0" data-step="1" data-grid="false" data-grid-snap="false" data-prettify-separator="" data-prettify-enabled="false" data-keyboard="true" data-drag-interval="true" data-data-type="number">
</div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bottom-left-container html-fill-item html-fill-container">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="margin: 0px; padding: 0px;border-style: none" class="html-fill-item html-fill-container">
<div class="shiny-plot-output html-fill-item html-fill-container" id="year_plot1" style="width:100%;height:400px;"></div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div><div class="column html-fill-item html-fill-container" style="width:100%;">
<div class="top-right-container html-fill-item html-fill-container">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="font-size: .75em;" class="html-fill-item html-fill-container">
<div class="datatables html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="year1_table" style="width:100%;height:auto;"></div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
<div class="bottom-right-container html-fill-item html-fill-container">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="font-size: .75em;" class="html-fill-item html-fill-container">
<div class="datatables html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="year2_table" style="width:100%;height:auto;"></div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-4"><div class="card-body html-fill-item html-fill-container" data-title="Observations">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div style="font-size: 80%" class="html-fill-item html-fill-container">
<div class="datatables html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="data_observations" style="width:100%;height:auto;"></div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
<!-- ### Years -->
<!-- ```{r} -->
<!-- selectInput( -->
<!--   "years_year_from", -->
<!--   "From", -->
<!--   years(), -->
<!--   multiple = FALSE, -->
<!--   selectize = TRUE, -->
<!--   width = "100px", -->
<!--   size = NULL -->
<!-- ) -->
<!-- selectInput( -->
<!--   "years_year_to", -->
<!--   "To", -->
<!--   years(), -->
<!--   multiple = FALSE, -->
<!--   selectize = TRUE, -->
<!--   width = "100px", -->
<!--   size = NULL -->
<!-- ) -->
<!-- plotOutput("total_time_birding") -->
<!-- ``` -->
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-5"><div class="card-body html-fill-item html-fill-container" data-title="Map">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div class="leaflet html-widget html-widget-output shiny-report-size html-fill-item html-fill-container" id="large_hotspot_map" style="width:100%;height:400px;"></div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-6-6"><div class="card-body html-fill-item html-fill-container" data-title="Help">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<h3>Sidebar</h3>
<p>The arrow in the top right of the sidebar allows you to close and reopen the sidebar.</p>
<strong>Hotspot</strong>
<p>The dashboard shows data for the hotspot selected. You can select a hotspot by selecting one from the list, but also by typing (part of) its name in the Hotspot box. The hotspots are either sorted alphabetically by name, or by the total number of checklists associated with each hotspot (in descending order). This can be controlled using the “Hotspot list sorting” setting.</p>
<strong>Season colors</strong>
<p>This setting controls the season colors in the graph on the Checklists tab.</p>
<strong>Date range</strong>
<p>By default, the dashboard uses all your data. You can limit the data it uses by moving the date range slider (which moves the start and ending dates in increments of about 1 month) or by clicking on the start or ending date and selecting a specific year, month and day of the month.</p>
<strong>Import</strong>
<p>
You can use the “Import…” button to load your personal eBird data if you have stored those locally on your machine. You can download your personal data 
<a href="https://ebird.org/downloadMyData" target="_blank">here</a>
.
</p>
<p>By default, the dashboard displays my personal ebird data. If you have cloned my code and are compiling the dashboard locally on your machine, you can replace my data permanently by moving your “MyEBirdData.csv” file to the folder where the dashboard code is stored.</p>
<h3>Tabs</h3>
<strong>Checklists</strong>
<p>Each dot in this data visualization represents one checklist. The horizontal axis indicates the checklist date, and the vertical axis indicates the total number of species reported for that checklist. The season is indicated by color: blue for winter, green for spring, yellow for summer, and orange for fall. By default, the colors align with the seasons of the Northern hemisphere. You can modify this by changing the “Season colors” setting to Southern hemisphere.</p>
<p>A summary of each checklist, including its location, can be gleaned by hovering the mouse cursor over a dot in the graph. Clicking the dot will open a new tab with the checklist in eBird.</p>
<strong>Species</strong>
<p>This table shows, for each species that you have reported: when you first reported it; when you last reported it; the percentage of your checklists on which the species occurs; the total number of your checklists on which the species occurs.</p>
<p>The Search box can be used to quickly navigate to data for a specific species. It can also be used to compare data for a group of birds with similar names. For instance, searching for “sparrow” will return a list of species whose name includes the word “sparrow”.</p>
<p>Each column can be sorted in ascending or descending order by clicking its name.</p>
<strong>Year list</strong>
<p>This tab allows you to compare data for two specific calendar years. The graph shows the cumulative number of unique species reported throughout the year, with the most recent year indicated in blue. Each table lists the total number of species reported, and the date at which a species was first reported.</p>
<strong>Observations</strong>
<p>This table shows data for each checklist observation. (Note that the table may load a bit slowly if you are looking at a lot of observations.) Each column can be sorted in ascending or descending order by clicking its name. Each column can also be filtered; for instance, you can enter a species in the “Common name” column to see only observations for that species.</p>
<p>Clicking on the “Checklist ID” will open a new tab with the checklist in eBird.</p>
<strong>Map</strong>
<p>The map shows a satellite image of the hotspot(s) that you selected. Clicking on the tool in the bottom left corner of the map allows you to zoom in and out.</p>
<h3>Helpful eBird information</h3>
<a href="https://support.ebird.org/en/support/solutions/articles/48000795623-ebird-rules-and-best-practices" target="_blank">Best practices</a>
<a href="https://support.ebird.org/en/support/solutions/articles/48000838845" target="_blank">How to count birds</a>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
<div id="3ade8a4a-fb1d-4a6c-8409-ac45482d5fc9" class="hidden html-fill-item html-fill-container">

</div>
</div>
</div></div></div><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div>
</div></div><aside id="bslib-sidebar-1" class="sidebar html-fill-container html-fill-item"><div class="html-fill-container html-fill-item">
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="hotspot-label" for="hotspot">Hotspot</label>
<div>
<select id="hotspot" class="shiny-input-select"></select>
<script type="application/json" data-for="hotspot" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="hotspot_sorting-label" for="hotspot_sorting">Hotspot list sorting</label>
<div>
<select id="hotspot_sorting" class="shiny-input-select"><option value="Alphabetic">Alphabetic</option>
<option value="Number of checklists" selected="">Number of checklists</option></select>
<script type="application/json" data-for="hotspot_sorting" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="season_coloring-label" for="season_coloring">Season colors</label>
<div>
<select id="season_coloring" class="shiny-input-select"><option value="Northern hemisphere" selected="">Northern hemisphere</option>
<option value="Southern hemisphere">Southern hemisphere</option>
<option value="None">None</option></select>
<script type="application/json" data-for="season_coloring" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<div class="cell-output-display">
<div style="display: inline-block; padding-top: 0px; margin-top: 0px; margin-left: 16px; margin-right: 16px; font-size: 15px; width: 163px">
<div style="display: none;">Slider</div>
<div class="form-group shiny-input-container no-baseline">
<label class="control-label" id="date_range_slider-label" for="date_range_slider"></label>
<input class="js-range-slider" id="date_range_slider" data-skin="shiny" data-type="double" data-min="1742515200000" data-max="1750291200000" data-from="1747699200000" data-to="1750291200000" data-step="86400000" data-grid="false" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-drag-interval="true" data-data-type="date" data-time-format="%b %Y">
</div>
</div>
</div>
<div class="cell-output-display">
<div style="display: inline-block; padding-top: 0px; margin-bottom: 0px; margin-top: -20px; text-align: center">
<style>.form-control, .input-group-addon {padding: 0px 0px 0px 0px !important}</style>
<div id="date_range" class="shiny-date-range-input form-group shiny-input-container">
<label class="control-label" id="date_range-label" for="date_range"></label>
<div class="input-daterange input-group input-group-sm">
<input class="form-control" type="text" aria-labelledby="date_range-label" title="Date format: mm/dd  yyyy" data-date-language="en" data-date-week-start="1" data-date-format="mm/dd  yyyy" data-date-start-view="year" data-min-date="2001-01-01" data-max-date="2012-12-21" data-initial-date="2001-01-01" data-date-autoclose="true">
<span class="input-group-addon input-group-prepend input-group-append">
<span class="input-group-text">to</span>
</span>
<input class="form-control" type="text" aria-labelledby="date_range-label" title="Date format: mm/dd  yyyy" data-date-language="en" data-date-week-start="1" data-date-format="mm/dd  yyyy" data-date-start-view="year" data-min-date="2001-01-01" data-max-date="2012-12-21" data-initial-date="2010-12-31" data-date-autoclose="true">
</div>
</div>
</div>
</div>
<div class="cell-output-display">
<div style="margin-top: 5px; margin-bottom: -10px;">
<div class="form-group shiny-input-container" style="width:100%;">
<label class="control-label" id="upload-label" for="upload"></label>
<div class="input-group">
<label class="input-group-btn input-group-prepend">
<span class="btn btn-default btn-file">
Import data
<input id="upload" class="shiny-input-file" name="upload" type="file" style="position: absolute !important; top: -99999px !important; left: -99999px !important;" accept=".csv">
</span>
</label>
<input type="text" class="form-control" placeholder="" readonly="readonly">
</div>
<div id="upload_progress" class="progress active shiny-file-input-progress">
<div class="progress-bar"></div>
</div>
</div>
</div>
</div>
<div class="cell-output-display">
<pre class="shiny-text-output noplaceholder" id="imported_data_statistics"></pre>
</div>
<div class="cell-output-display">
<div style="margin-top: 0px">
<button class="btn btn-default action-button custom-download-button" id="ab1" onclick="window.open('https://ebird.org/downloadMyData', '_blank')" type="button">Download your eBird data</button>
</div>
</div>
</div></aside>
<button class="collapse-toggle" type="button" title="Toggle sidebar" aria-expanded="true" aria-controls="bslib-sidebar-1">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16" class="bi bi-chevron-left collapse-icon" style="fill:currentColor;" aria-hidden="true" role="img">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path>
    </svg>
</button>
<script data-bslib-sidebar-init="">
bslib.Sidebar.initCollapsibleAll()
</script>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
if (!file.exists("MyEBirdData.csv")){
  stop("Cannot compile document. Missing required file \"MyEBirdData.csv\".\nPlease add this file with your personal eBird data to the folder from which you compile the document.")
}

if (TRUE == FALSE){
  # KEEP THIS SECTION!
  # SHINYAPPS.IO scans R code to figure out which packages it needs to install.
  # It looks for 'library("[package]")' syntax, which this script does not use;
  # it uses a loop (see below) to load packages.
  library("tidyverse")
  library("ggplot2")
  library("shiny")
  library("bslib")
  library("bsicons")
  library("leaflet")
  library("ggiraph")
  library("formattable")
}

required_packages =
  c(
    "tidyverse",
    "ggplot2",
    "shiny",
    "bslib",
    "bsicons",
    "leaflet",
    "ggiraph",
    "formattable"
  )
missing_packages = required_packages[!sapply(required_packages, requireNamespace, quietly = TRUE)]
if (length(missing_packages) > 0){
  stop(
    paste(
      "The following packages are required to run the dashboard:\n\n",
      paste0(missing_packages, collapse = ", "),
      "\n\nPlease make sure to install these packages before compiling the dashboard."
    )
  )
}

invisible(lapply(required_packages, library, character.only = TRUE))

original_ebird_green = "#2F7742"
ebird_green = "#70c687"
ebird_yellow = "#FFD800"
ebird_red = "#DA1C13"
light_gray = "#E5E5E5"
spring_color = "#70c687"
summer_color = "#FFD800"
fall_color = "#FF9900"
winter_color = "#56B3FA"

source("helper-functions.R", local = TRUE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
react_delay = 1

change_slider = reactiveVal(Sys.time())
change_daterange = reactiveVal(Sys.time())
reactive_hotspot_values = reactiveVal(list(NULL))
earliest_date = reactiveVal()
latest_date = reactiveVal()
earliest_year = reactiveVal()
latest_year = reactiveVal()
n_rows_data = reactiveVal()
n_checklists = reactiveVal()
n_species = reactiveVal()
testje = reactiveVal(0)
import_counter = reactiveVal(0)
hotspot_latitude = reactiveVal(0)
hotspot_longitude = reactiveVal(0)
hotspot_name = reactiveVal("")
years = reactiveVal(list(NULL))

ebird_dat = reactiveVal({
  read_ebird_data()
})

imported_dat = reactive({
  req(input$upload)
  imported_dat = read_ebird_data(input$upload$datapath)
})

observeEvent(input$upload, {
  # triggered in response to the user uploading a file
  import_counter(import_counter() + 1)
  imported_dat = read_ebird_data(input$upload$datapath)
  ebird_dat(imported_dat)
  years(as.numeric(as.character(sort(unique(imported_dat$year)))))
  earliest_date(min(imported_dat$date))
  latest_date(max(imported_dat$date))
  updateSelectInput(
    session,
    "years_year_from",
    choices = years()
  )
  updateSelectInput(
    session,
    "years_year_to",
    choices = years()
  )
  updateSliderInput(
    session,
    "date_range_slider",
    min = earliest_date(),
    max = latest_date(),
    value = c(earliest_date(), latest_date()),
    timeFormat = "%b %Y"
  )
  # NOTE: the data range input object gets updated automatically
  # updateDateRangeInput(
  #   session,
  #   "date_range",
  #   start = earliest_date(),
  #   end = latest_date(),
  #   min = earliest_date(),
  #   max = latest_date()
  # )
  n_rows_data(nrow(imported_dat))
  n_checklists(
    imported_dat %>%
      #        filter(protocol != "eBird - Casual Observation") %>%
      distinct(submission_id) %>%
      nrow()
  )
  n_species(
    imported_dat %>% 
      #        filter(protocol != "eBird - Casual Observation") %>%
      distinct(common_name) %>%
      nrow())
})

selected_dat = reactive({
  req(input$hotspot)
  if (input$hotspot == "All"){
    # user has selected all hotspots
    my_selected_dat = ebird_dat()
  } else {
    # user has selected a hotspot
    my_selected_dat = 
      ebird_dat() %>% 
      filter(
        location == input$hotspot
      )
  }
  earliest_date(min(my_selected_dat$date))
  latest_date(max(my_selected_dat$date))
  years(as.numeric(as.character(sort(unique(my_selected_dat$year)))))
  #  n_rows_data(nrow(selected_dat))
  #  n_checklists(selected_dat %>% distinct(submission_id) %>% nrow())
  my_selected_dat = my_selected_dat %>%
    filter(
      date >= input$date_range[1],
      date <= input$date_range[2]
    )
  earliest_year(min(as.numeric(as.character(my_selected_dat$year))))
  latest_year(max(as.numeric(as.character(my_selected_dat$year))))
  top_lat_lng =
    my_selected_dat %>%
    distinct(location, latitude, longitude)
  hotspot_latitude(top_lat_lng$latitude)
  hotspot_longitude(top_lat_lng$longitude)
  hotspot_name(top_lat_lng$location)
  #  years(unique(my_selected_dat$year))
  # updateNumericInput(session, "year1", value = years()[1], min = years()[1], max = years()[length(years())])
  # updateNumericInput(session, "year2", value = years()[1], min = years()[1], max = years()[length(years())])
  return(my_selected_dat)
})

total_species = reactive({
  selected_dat() %>% distinct(common_name) %>% nrow()
})
output$total_species_text = renderText({
  total_species() %>% format(big.mark = ",")
}
)

total_checklists = reactive({
  selected_dat() %>% 
    #    filter(protocol != "eBird - Casual Observation") %>%
    distinct(submission_id) %>%
    nrow()
})
output$total_checklists_text = renderText({
  total_checklists() %>% format(big.mark = ",")
}
)

total_time = reactive({
  selected_dat() %>% 
    distinct(submission_id, duration_min) %>% 
    filter(!is.na(duration_min)) %>%
    summarize(total_time_hours = sum(duration_min) / 60) %>% 
    pull(total_time_hours) %>% 
    round(1)
})

total_observations = reactive({
  selected_dat() %>%
    nrow()
})

output$total_time_text = renderText({
  total_time()
}
)

# last_trip = reactive({
#   max_date = max(selected_dat()$date)
#   paste(
#     month(max_date, label = TRUE),
#     " ",
#     mday(max_date),
#     ", ",
#     year(max_date)
#   )
# })
# output$last_trip_text = renderText({
#   last_trip()
# }
# )

output$total_observations_text = renderText({
  total_observations() %>% format(big.mark = ",")
})

max_checklist = reactive({
  selected_dat() %>% 
    count(submission_id) %>%
    arrange(desc(n)) %>% 
    slice(1) %>% 
    pull(n)
})

output$max_checklist_text = renderText({
  max_checklist()
})

# output$imported_data_text = renderText({
#   paste0(
#     "Imported ",
#     imported_dat() %>% nrow(),
#     " rows of data."
#   )
# })

output$imported_data_statistics = renderText({
  ifelse(
    is.null(input$upload$name),
    "",
    paste0(
      "\nImported: \n ",
      n_rows_data() |> format(big.mark = ","),
      " observations\n ",
      n_checklists() |> format(big.mark = ","),
      " checklists\n ",
      n_species() |> format(big.mark = ","),
      " species"
    )
  )
})

output$import_filename = renderText({
  paste0(
    ifelse(
      is.null(input$upload$name),
      "",
      paste0(
        input$upload$name
      )
    )
  )
})

output$species_count_plot = renderGirafe({
  plot = 
    selected_dat() %>% 
    count(submission_id, location, date, us_season) %>% 
    mutate(
      my_label = paste(
        n,
        "species on ", 
        ordinal_date_suffix(date),
        "\n",
        location
      )
    ) %>% 
    ggplot(aes(x = date, y = n, color = us_season)) + 
    geom_point_interactive(
      #      position = ggbeeswarm::position_quasirandom(width = 1),
      shape = 16,
      aes(
        tooltip = my_label,
        data_id = submission_id,
        tooltip_fill = date,
        onclick = sprintf("window.open(\"https://ebird.org/checklist/%s\")", submission_id)
      )
    ) +
    scale_x_date() +
    scale_y_continuous(
      #      expand = expansion(add = c(1, 1)),
      limits = c(0, NA),
      breaks = ~unique(round(pretty(.)))
    ) +
    labs(
      #      title = "Total species reported by checklist",
      subtitle = "Note: Clicking on a data point opens the checklist in eBird",
      x = "",
      y = "Total species reported"
    ) +
    theme_gray(base_size = 14) +
    theme(
      panel.grid = element_blank(),
      panel.background = element_blank(),
      axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
      plot.subtitle = element_text(
        color = "#707070",
        size = 10,
        margin = margin(t = 0, r = 0, b = 15, l = 0)
      )
    )
  if(input$season_coloring =="None"){
    plot = 
      plot +
      scale_color_manual(
        # 636363
        values = c("#707070", "#707070", "#707070", "#707070"),
        guide = "none"
      )
  } else {
    if(input$season_coloring =="Southern hemisphere"){
      plot = 
        plot +
        scale_color_manual(
          values = c("spring" = fall_color, "summer" = winter_color, "fall" = spring_color, "winter" = summer_color),
          guide = "none"
        )
    } else {
      plot = 
        plot +
        scale_color_manual(
          values = c("spring" = spring_color, "summer" = summer_color, "winter" = winter_color, "fall" = fall_color),
          guide = "none"
        )
    }
  }
  # avoid fractions on the Y axis
  # y_axis_breaks = layer_scales(plot)$y$break_positions()
  # y_axis_breaks = y_axis_breaks[!is.na(y_axis_breaks)]
  # if (length(y_axis_breaks[y_axis_breaks != round(y_axis_breaks)]) > 0){
  #   y_axis_breaks = y_axis_breaks[y_axis_breaks == round(y_axis_breaks)]
  #   plot = 
  #     plot +
  #     scale_y_continuous(breaks = y_axis_breaks)
  # }
  girafe(
    ggobj = plot, 
    pointsize = 60,
    width_svg = (0.98 * (input$pltChange$width - 300) / input$pltChange$dpi),
    height_svg = (0.88 * (input$pltChange$height - 95 - 80) / input$pltChange$dpi)
    # width_svg = (0.98 * (input$pltChange$width - 300) / input$pltChange$dpi),
    # height_svg = (0.75 * (input$pltChange$height - 100) / input$pltChange$dpi)
  ) %>% 
    girafe_options(
      opts_sizing(rescale = FALSE),
      opts_toolbar(
        fixed = TRUE,
        pngname = "ebird-dashboard.png",
        hidden = c("selection", "saveaspng")
      ),
      opts_tooltip(
        use_fill = TRUE,
        opacity = .7,
        offx = 10,
        offy = 0
        #    css = "color:blue; background-color:red, fill-opacity:.5;"
        #    tooltip_fill = "white"
      ),
      #  opts_hover(css = "stroke:yellow;stroke-width:3px;fill-opacity:0.8;")
      opts_hover(
        css = "stroke:black; stroke-width:1px;"
      )
    )
})

output$data_preview = DT::renderDT({
  data_preview_table =
    selected_dat() %>%
    # mutate(
    #   checklist = ifelse(
    #     protocol == "eBird - Traveling Count",
    #     submission_id,
    #     NA
    #   )
    # ) %>%
    mutate(n_checklists = n_distinct(submission_id, na.rm = TRUE)) %>%
    group_by(common_name) %>%
    mutate(
      first_seen_checklist = ifelse(
        date == min(date) & row_number() == 1,
        submission_id,
        NA),
      last_seen_checklist = ifelse(
        date == max(date) & row_number() == n(),
        submission_id,
        NA)
    ) %>% 
    fill(first_seen_checklist, .direction = "down") %>% 
    fill(last_seen_checklist, .direction = "up") %>% 
    summarize(
      first_seen = min(date),
      last_seen = max(date),
      first_seen_checklist = unique(first_seen_checklist),
      last_seen_checklist = unique(last_seen_checklist),
      perc_checklists = (100 * (n() / max(n_checklists))) %>% round(1),
      n_checklists = n()
    ) %>%
    mutate(
      perc_checklists = my_color_bar()(perc_checklists),
      first_seen = paste0("<a target='_blank' href='https://ebird.org/checklist/", first_seen_checklist,"'>", first_seen, "<\u002fa>"),
      last_seen = paste0("<a target='_blank' href='https://ebird.org/checklist/", last_seen_checklist,"'>", last_seen, "<\u002fa>")
    ) %>% 
    select(-c(first_seen_checklist, last_seen_checklist)) %>% 
    arrange(desc(perc_checklists)) %>% 
    rename(
      "Species" = common_name,
      "First" = first_seen,
      "Last" = last_seen,
      "% Checklists" = perc_checklists,
      "N Checklists" = n_checklists
    )
  n_rows = nrow(data_preview_table)
  data_preview_table = 
    data_preview_table |> 
    formattable() %>% 
    as.datatable(
      rownames = FALSE,
      options = list(
        dom = "ft",
        scrollY = ((input$pltChange$height - 122)) - 148,
        pageLength = n_rows
      )
    )
  # something in the above changes N checklists to character; fix for sorting
  data_preview_table$x$data$`N Checklists` = as.numeric(data_preview_table$x$data$`N Checklists`)
  return(data_preview_table)
})

output$data_observations = DT::renderDT({
  n_rows = nrow(selected_dat())
  observations_table =
    selected_dat() %>%
    arrange(date, time) %>%
    select(date, count, common_name, location, submission_id, observation_details) |>
    #     mutate(
    #       # can be used to display scrollable height, for trouble shooting
    #       height = input$pltChange$height,
    #       scrolly = paste0(0.65 * (input$pltChange$height - 95 - 80), "px")
    # ) %>%
    mutate(
      count = ifelse(count == -1, "X", count),
      observation_details = ifelse(is.na(observation_details), "", observation_details),
      submission_id = paste0("<a target='_blank' href='https://ebird.org/checklist/", submission_id,"'>", submission_id, "<\u002fa>")
    ) |> 
    rename(
      "Date" = date,
      "Count" = count,
      "Common name" = common_name,
      "Location" = location,
      "Comments" = observation_details,
      "Checklist ID" = submission_id
    ) |> 
    formattable() |> 
    as.datatable(
      rownames = FALSE,
      options = list(
        dom = "t",
        scrollY = ((input$pltChange$height - 122)) - 148,
        pageLength = n_rows,
        columnDefs = list(
          list(width = '12', targets = 0),
          list(width = '8%', targets = 1),
          list(width = '20%', targets = 2),
          list(width = '25%', targets = 3),
          list(width = '8%', targets = 4),
          list(width = '27%', targets = 5)
        )
      ),
      filter = list(
        position = 'top', clear = FALSE
      )
    )
  # # something in the above changes N checklists to character; fix for sorting
  # data_preview_table$x$data$`N checklists` = as.numeric(data_preview_table$x$data$`N checklists`)
  return(observations_table)
}, server = TRUE)

output$year1_table = DT::renderDT({
  table_dat = 
    selected_dat()%>% 
    filter(year == input$year_list_slider[1]) %>% 
    group_by(common_name) %>% 
    slice(1) %>% 
    ungroup() %>% 
    arrange(desc(date)) %>% 
    mutate(date = substr(date, 6, length(date))) %>% 
    select(common_name, date)
  n_species = paste0(input$year_list_slider[1], ": ", nrow(table_dat), " species")
  table_dat %>% 
    rename(
      !!n_species := common_name
    ) %>% 
    formattable() %>% 
    as.datatable(
      rownames = FALSE,
      options = list(
        dom = "ft",
        scrollY = ((input$pltChange$height - 122) * .50) - 148,
        pageLength = 10000
      )
    )
})

output$year2_table = DT::renderDT({
  table_dat = 
    selected_dat() %>% 
    filter(year == input$year_list_slider[2]) %>% 
    group_by(common_name) %>%
    arrange(date) %>% 
    slice(1) %>% 
    ungroup() %>% 
    arrange(desc(date)) %>% 
    mutate(date = substr(date, 6, length(date))) %>% 
    select(common_name, date)
  n_species = paste0(input$year_list_slider[2], ": ", nrow(table_dat), " species")
  table_dat %>% 
    rename(
      !!n_species := common_name
    ) %>% 
    formattable() %>% 
    as.datatable(
      rownames = FALSE,
      options = list(
        dom = "ft",
        scrollY = ((input$pltChange$height - 122) * .50) - 148,
        pageLength = 10000
      )
    )
})

output$total_time_birding = renderPlot({
  selected_dat() |> 
    distinct(year, submission_id, duration_min) |>
    group_by(year) |> 
    summarize(total_time_min = sum(duration_min, na.rm = TRUE)) |> 
    mutate(total_time_hrs = total_time_min / 60) |> 
    ggplot(aes(x = year, y = total_time_hrs)) + 
    geom_col() +
    labs(
      x = "",
      y = "Total time (hours)"
    ) +
    theme_gray(base_size = 14) +
    theme(
      panel.background = element_blank()
    )
})

output$hotspot_map = renderLeaflet({
  leaflet() %>%
    addTiles(
      urlTemplate = "https://mts1.google.com/vt/lyrs=s&hl=en&src=app&x={x}&y={y}&z={z}&s=G",
      attribution = "Google"
    ) %>%
    addMarkers(
      lng = hotspot_longitude(), 
      lat = hotspot_latitude(), 
      popup = hotspot_name()
      # lng = top_location_info$longitude, 
      # lat = top_location_info$latitude, 
      # popup = top_location_info$location
    )
}
)

output$large_hotspot_map = renderLeaflet({
  leaflet() %>%
    addTiles(
      urlTemplate = "https://mts1.google.com/vt/lyrs=s&hl=en&src=app&x={x}&y={y}&z={z}&s=G",
      attribution = "Google"
    ) %>%
    addMarkers(
      lng = hotspot_longitude(), 
      lat = hotspot_latitude(), 
      popup = hotspot_name()
      # lng = top_location_info$longitude, 
      # lat = top_location_info$latitude, 
      # popup = top_location_info$location
    )
}
)

output$year_plot1 = renderPlot({
  selected_dat() %>% 
    year_list_ecdf(
      year_from = input$year_list_slider[1], 
      year_to = input$year_list_slider[2]
    )
})

observeEvent(c(earliest_year(), latest_year()), {
  updateSliderInput(
    session,
    "year_list_slider",
    min = earliest_year(),
    max = latest_year(),
    value = c(earliest_year(), latest_year())
  )
}
)

observeEvent(c(earliest_date(), latest_date()), {
  testje(testje() + 1)
  # reset sidebar date input if earliest or latest date of data changes
  updateSliderInput(
    session,
    "date_range_slider",
    min = earliest_date(),
    max = latest_date(),
    value = c(earliest_date(), latest_date()),
    timeFormat = "%b %Y"
  )
  updateSelectInput(
    session,
    "years_year_from",
    choices = years()
  )
  updateSelectInput(
    session,
    "years_year_to",
    choices = years()
  )
}
)

observeEvent(c(input$date_range_slider, input$ebird_dat, input$selected_dat), {
  if (difftime(Sys.time(), change_slider()) > react_delay) {
    change_daterange(Sys.time())
    updateDateRangeInput(
      session,
      "date_range",
      start = input$date_range_slider[[1]],
      end = input$date_range_slider[[2]]
    )
  }
}
)

observeEvent(c(input$date_range, input$ebird_dat, input$selected_dat), {
  if (difftime(Sys.time(), change_daterange()) > react_delay) {
    change_slider(Sys.time())
    updateSliderInput(
      session,
      "date_range_slider",
      value = c(input$date_range[[1]],
                input$date_range[[2]]),
      timeFormat = "%b %Y"
    )
  }
})

observeEvent(
  c(input$hotspot_sorting, input$upload),
  { 
    if (input$hotspot_sorting == "Alphabetic"){
      hotspot_list = 
        ebird_dat() %>% 
        distinct(location) %>% 
        arrange(location)
      if (any(str_detect(hotspot_list$location, "^[0-9]"))){
      }
      # move hotspots whose name starts with a number to the bottom of the list
      # these names tend to be very long
      hotspot_list = 
        bind_rows(
          hotspot_list %>% 
            filter(!str_detect(location, "^[0-9]")),
          hotspot_list %>% 
            filter(str_detect(location, "^[0-9]"))
        )
      hotspot_list = c("All", hotspot_list %>% pull())
    } else
    {
      # arrange by Number of checklists reported
      hotspot_list =
        ebird_dat() %>%
        distinct(location, submission_id) %>% 
        count(location, sort = TRUE) %>%
        pull(location)
      hotspot_list = c("All", hotspot_list)
    }
    reactive_hotspot_values(hotspot_list)
    earliest_date(min(ebird_dat()$date))
    latest_date(max(ebird_dat()$date))
    years(as.numeric(as.character(sort(unique(ebird_dat()$year)))))
    updateSelectInput(
      session,
      "hotspot",
      choices = reactive_hotspot_values(),
      selected = NULL
    )
    updateSliderInput(
      session,
      "date_range_slider",
      min = earliest_date(),
      max = latest_date(),
      value = c(earliest_date(), latest_date()),
      timeFormat = "%b %Y"
    )
    updateDateRangeInput(
      session,
      "date_range",
      start = earliest_date(),
      end = latest_date(),
      min = earliest_date(),
      max = latest_date()
    )
  })

# for trouble shooting
output$testje = renderText({
  paste0(
    "X: ", input$year_list_slider[1],
    "\ntestje: ", testje(), 
    "\nearliest date: ", earliest_date(),
    "\nlatest date: ", latest_date(),
    "\nearliest year: ", earliest_year(),
    "\nlatest year: ", latest_year(),
    "\nimport counter: ", import_counter()
  )}
)
# output$width = renderText({paste0("width: ", input$pltChange$width)})
# output$height = renderText({paste0("height: ", input$pltChange$height)})
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.15.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.15.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.15.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-javascript"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/ion.rangeSlider.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["strftime"]},{"type":"character","attributes":{},"value":["0.9.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/strftime"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["strftime-min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-css"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/ion.rangeSlider.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap-datepicker-js"]},{"type":"character","attributes":{},"value":["1.9.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/datepicker"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/bootstrap-datepicker.min.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script>(function() {\n        var datepicker = $.fn.datepicker.noConflict();\n        $.fn.bsDatepicker = datepicker;\n      })();\n     <\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap-datepicker-css"]},{"type":"character","attributes":{},"value":["1.9.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/datepicker"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/bootstrap-datepicker3.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.9.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.9.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.9.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.9.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["d3-bundle"]},{"type":"character","attributes":{},"value":["5.16.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/d3-bundle-5.16.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["d3-bundle.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["d3-lasso"]},{"type":"character","attributes":{},"value":["0.0.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/d3-lasso-0.0.5"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["d3-lasso.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["save-svg-as-png"]},{"type":"character","attributes":{},"value":["1.4.17"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/save-svg-as-png-1.4.17"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["save-svg-as-png.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["flatbush"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/flatbush-4.4.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["flatbush.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ggiraphjs"]},{"type":"character","attributes":{},"value":["0.8.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/ggiraphjs-0.8.10"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraphjs.min.js"]},{"type":"character","attributes":{},"value":["ggiraphjs.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["girafe-binding"]},{"type":"character","attributes":{},"value":["0.8.13"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["girafe.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["ggiraph"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.8.13"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.33"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-javascript"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/ion.rangeSlider.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["strftime"]},{"type":"character","attributes":{},"value":["0.9.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/strftime"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["strftime-min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-css"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/ion.rangeSlider.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.10.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.33"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.33"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.33"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leaflet"]},{"type":"character","attributes":{},"value":["1.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet.js"]},{"type":"character","attributes":{},"value":["leaflet.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.2.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leafletfix"]},{"type":"character","attributes":{},"value":["1.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/leafletfix"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leafletfix.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.2.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["proj4"]},{"type":"character","attributes":{},"value":["2.6.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/plugins/Proj4Leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["proj4.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.2.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["Proj4Leaflet"]},{"type":"character","attributes":{},"value":["1.0.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/plugins/Proj4Leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["proj4leaflet.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.2.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["rstudio_leaflet"]},{"type":"character","attributes":{},"value":["1.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/rstudio_leaflet"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rstudio_leaflet.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.2.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leaflet-binding"]},{"type":"character","attributes":{},"value":["2.2.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/assets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.2.2"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72]}},"value":[{"type":"character","attributes":{},"value":["base","bsicons","bslib","cachem","cli","compiler","crosstalk","datasets","dichromat","digest","dplyr","DT","evaluate","farver","fastmap","forcats","formattable","generics","ggiraph","ggplot2","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","leaflet","lifecycle","lubridate","magrittr","memoise","methods","mime","pillar","pkgconfig","promises","purrr","R6","RColorBrewer","Rcpp","readr","rlang","rmarkdown","rstudioapi","sass","scales","shiny","stats","stringi","stringr","systemfonts","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utils","uuid","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.4.1","0.1.2","0.9.0","1.1.0","3.6.5","4.4.1","1.2.1","4.4.1","2.0-0.1","0.6.37","1.1.4","0.33","1.0.3","2.1.2","1.2.0","1.0.0","0.2.1","0.1.4","0.8.13","3.5.2","1.8.0","4.4.1","4.4.1","4.4.1","0.3.6","1.1.3","0.5.8.1","1.6.4","1.6.16","0.1.4","2.0.0","1.50","1.4.2","2.2.2","1.0.4","1.9.4","2.0.3","2.0.1","4.4.1","0.13","1.10.2","2.0.3","1.3.2","1.0.4","2.6.1","1.1-3","1.0.14","2.1.5","1.1.6","2.29","0.17.1","0.4.10","1.4.0","1.10.0","4.4.1","1.8.7","1.5.1","1.2.3","3.2.1","1.3.1","1.2.1","2.0.0","0.3.0","4.4.1","0.5.0","4.4.1","1.2-1","0.6.5","3.0.2","0.52","1.8-4","2.3.10"]}]}]}
</script>
<!--/html_preserve-->


<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /container fluid -->

<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (_event) {
  if (window.bslib.Card) {
    window.bslib.Card.initializeAllCards();
  }
}); 
</script>
  



</body></html>